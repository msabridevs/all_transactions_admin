<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ุทูุจุงุช ุงููุนุงููุงุช ุงูููุตููุฉ</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>


  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      direction: rtl;
      text-align: right;
    }
    label, input, textarea, button, select {
      display: block;
      margin-bottom: 10px;
      width: 100%;
      font-size: 18px;
    }
    input, textarea, select {
      padding: 10px;
    }
    .result {
      margin-top: 10px;
      padding: 20px;
      border: 1px solid #ccc;
      background: #f9f9f9;
      font-size: 18px;
    }
    #app-section { display: none; }
    .flex-container {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
    }
    .panel {
      flex: 1 1 400px;
      min-width: 300px;
    }
  </style>
</head>

<body>

 <div id="print-area" style="position: absolute; left: -9999px; font-size: 18px; padding: 20px; width: 500px;">
  <p id="print-name"></p>
  <p id="print-number"></p>
  <p id="print-transaction"></p>
</div>

  <h2 style="margin-bottom: 40px;">ุทูุจุงุช ุงููุนุงููุงุช ุงูููุตููุฉ</h2>

  <div id="auth-section">
    <label>ุงูุจุฑูุฏ ุงูุฅููุชุฑููู:</label>
    <input type="email" id="email" />
    <label>ูููุฉ ุงููุฑูุฑ:</label>
    <input type="password" id="password" />
    <button id="login-btn">ุชุณุฌูู ุงูุฏุฎูู</button>
  </div>

  <div id="app-section">
    <button id="logout-btn">ุชุณุฌูู ุงูุฎุฑูุฌ</button>
    <div class="flex-container">
      <div class="panel">
        <h3>ุทูุจ ุฌุฏูุฏ</h3>
        <label>ููุน ุงููุนุงููุฉ:</label>
        <select id="transaction-type">
          <option value="">ุงุฎุชุฑ ููุน ุงููุนุงููุฉ</option>
          <option value="ููุฏ ูููุงุฏ">ููุฏ ูููุงุฏ</option>
          <option value="ุจุทุงูุฉ ุงูุฑูู ุงููููู">ุจุทุงูุฉ ุงูุฑูู ุงููููู</option>
          <option value="ุตุญููุฉ ุงูุญุงูุฉ ุงูุฌูุงุฆูุฉ">ุตุญููุฉ ุงูุญุงูุฉ ุงูุฌูุงุฆูุฉ</option>
          <option value="ููุฏ ูุฑุฏู">ููุฏ ูุฑุฏู</option>
          <option value="ููุฏ ุนุงุฆูู">ููุฏ ุนุงุฆูู</option>
          <option value="ููุฏ ุทูุงู">ููุฏ ุทูุงู</option>
          <option value="ููุฏ ุฒูุงุฌ">ููุฏ ุฒูุงุฌ</option>
          <option value="ุดูุงุฏุฉ ููุงุฉ">ุดูุงุฏุฉ ููุงุฉ</option>
          <option value="ุฅูุงุฏุฉ">ุฅูุงุฏุฉ</option>
          <option value="ุฅุตุฏุงุฑ ุฌูุงุฒ ุณูุฑ ูุฃูู ูุฑุฉ">ุฅุตุฏุงุฑ ุฌูุงุฒ ุณูุฑ ูุฃูู ูุฑุฉ</option>
          <option value="ุชุฌุฏูุฏ ุฌูุงุฒ ุณูุฑ">ุชุฌุฏูุฏ ุฌูุงุฒ ุณูุฑ</option>
          <option value="ุจุญุซ ุงูุฌูุณูุฉ">ุจุญุซ ุงูุฌูุณูุฉ</option>
          <option value="ุฅุณุชุฑุฏุงุฏ ุงูุฌูุณูุฉ">ุฅุณุชุฑุฏุงุฏ ุงูุฌูุณูุฉ</option>
          <option value="ุงูุฅุฐู ุจุงูุชุฌูุณ ูุน ุงูุงุญุชูุงุธ ุจุงูุฌูุณูุฉ ุงููุตุฑูุฉ">ุงูุฅุฐู ุจุงูุชุฌูุณ ูุน ุงูุงุญุชูุงุธ ุจุงูุฌูุณูุฉ ุงููุตุฑูุฉ</option>
          <option value="ุงูุฅุฐู ุจุงูุชุฌูุณ ูุน ุนุฏู ุงูุงุญุชูุงุธ ุจุงูุฌูุณูุฉ ุงููุตุฑูุฉ">ุงูุฅุฐู ุจุงูุชุฌูุณ ูุน ุนุฏู ุงูุงุญุชูุงุธ ุจุงูุฌูุณูุฉ ุงููุตุฑูุฉ</option>
        </select>

        <label>ุงุณู ููุฏู ุงูุทูุจ:</label>
        <input type="text" id="name" />
        <label>ุฑูู ุงููุงุชู:</label>
        <input type="tel" id="phone" />
        <label>ุงูุจุฑูุฏ ุงูุฅููุชุฑููู:</label>
        <input type="email" id="user-email" />

        <button id="submit-btn">ุชุณุฌูู ุงูุทูุจ</button>
        <div class="result" id="result"></div>
      </div>

      <div class="panel">
        <h3>ุชุญุฏูุซ ุฃู ุชุนุฏูู ุงูุทูุจ</h3>
        <label>ุฑูู ุงูุทูุจ (ุฃุฏุฎู ุฑููุงู ุฃู ุนุฏุฉ ุฃุฑูุงู ููุตููุฉ ุจููุงุตู):</label>
        <input type="text" id="existing-number" />

        <label>ุฑูุน ูููุงุช PDF ูุงุณุชุฎุฑุงุฌ ุฃุฑูุงู ุงูุทูุจุงุช:</label>
        <input type="file" id="pdf-upload" multiple accept="application/pdf" />
        <button id="extract-codes-btn">ุงุณุชุฎุฑุงุฌ ุงูุฃููุงุฏ</button>

        <label>ุงุฎุชุฑ ุงูุญุงูุฉ ุงูุฌุฏูุฏุฉ:</label>
        <select id="status-select">
          <option value="">ุงุฎุชุฑ ุงูุญุงูุฉ</option>
          <option value="ูุฑุฏุช ุงููุนุงููุฉ. ุฑุฌุงุก ุฅุญุถุงุฑ ุงูุงูุตุงู ูุงูุญุถูุฑ ููุงุณุชูุงู ุฎูุงู ุงูููุงุนูุฏ ุงูุฑุณููุฉ ุงููุนููุฉ.">ูุฑุฏุช ุงููุนุงููุฉ</option>
          <option value="ูุทููุจ ุงุณุชููุงุก">ูุทููุจ ุงุณุชููุงุก</option>
          <option value="ุฌุงุฑู ูุฑุงุฌุนุฉ ุงูุทูุจ">ุฌุงุฑู ูุฑุงุฌุนุฉ ุงูุทูุจ</option>
          <option value="ุชู ุงูุฅุฑุณุงู ุจุงูุจุฑูุฏ">ุชู ุงูุฅุฑุณุงู ุจุงูุจุฑูุฏ</option>
        </select>

<label for="notes">ููุงุญุธุงุช (ุงุฎุชูุงุฑู):</label>
<select id="notes" dir="rtl" style="width: 100%; min-width: 300px; font-size: 16px;">
  <option value="">- ุงุฎุชุฑ ุฃู ุงูุชุจ ููุงุญุธุฉ -</option>

  <option value="ููุงุณุชูุณุงุฑ ุนู ุงูุงุฌุฑุงุกุงุช ุงูุฎุงุตุฉ ุจุฌููุน ุงููุนุงููุงุช ุงูููุตููุฉุ ูุฑุฌู ูุฑุงุฌุนุฉ ุงููููุน ุงูุฑุณูู ููุจุนุซุฉ:

https://www.egyptconsulate-frankfurt.de/
ูุฐุงุ ููููู ุงูุชูุฏู ููุจุนุซุฉ ุฎูุงู ููุงุนูุฏ ุงูุนูู ุงูุฑุณููุฉ ุงูุชู ุชู ุงูุฅุนูุงู ุนููุง ุนูู ุงูุตูุญุฉุ ุจุฏูู ุญุฌุฒ ููุนุฏ ูุณุจู.">
    ููุงุณุชูุณุงุฑ ุนู ุงูุฅุฌุฑุงุกุงุช ููุงูุฉ ุงููุนุงููุงุช ุงูููุตููุฉ
  </option>

  <option value="ูููุฏูู ุนููุง ุจุฃู ุฌูุงุฒ ุงูุณูุฑ ุงููุทููุจ ูุฏ ูุตู ุจููุฑ ุงูุจุนุซุฉ- ูููููู ุงูุญุถูุฑ ุฎูุงู ุฃูุงู ุงูุนูู ุงูููุตูู ูู ุงูุณุงุนุฉ 14:00 ุนุตุฑุง ุญุชู 16:00 ุนุตุฑุง ููุงุณุชูุงู . 
ุจุฑุฌุงุก ุงุญุถุงุฑ ุฃุตู ุฌูุงุฒ ุงูุณูุฑ ูุงูุตุงู ุงูุงุณุชูุงู. ุญุชู ูุชุณูู ุชุณููู ุฌูุงุฒ ุณูุฑูู ุงูุฌุฏูุฏ. ูู ุญุงูุฉ ุทูุจ ุงุฑุณุงู ุงูุฌูุงุฒ ุนุจุฑ ุงูุจุฑูุฏุ ููุฌุจ ุงุฑุณุงู ุงูุงุชู ูู ูุธุฑูู ุจุงูุจุฑูุฏ ุงููุณุฌู:
1- ุฃุตู ุงูุตุงู ุงูุงุณุชูุงู.
2- ุฌูุงุฒ ุงูุณูุฑ ุงูุณุงุจู.
3- ูุธุฑูู ุจุงูุจุฑูุฏ ุงููุณุฌู ูุฏูู ุนููู ุงูุงุณู ูุงูุนููุงู ูุงูุทูุงุจุน ุงููุงุฒูุฉ ูุฅุนุงุฏุฉ ุงูุงุฑุณุงู ุงููู.
4- ุงูุฑุงุฑ ูููุน ุจุฑุบุจุชู ูู ุงุฑุณุงู ุฌูุงุฒ ุงูุณูุฑ ุนุจุฑ ุงูุจุฑูุฏ ููู ุญุงูุฉ ุถูุงุนู ุชุชุญูู ูุงูู ุงููุณุฆูููุฉ ูุตูุบุฉ ุงูุงูุฑุงุฑ ูู:
ุงูุณูุฏ ููุตู ุนุงู ุฌูููุฑูุฉ ูุตุฑ ุงูุนุฑุจูุฉ ูู ูุฑุงููููุฑุช
ูุฑุฌู ุงูุชูุฑู ุจุงุฑุณุงู ุฌูุงุฒ ุงูุณูุฑ ุจุงุณู / (ุตุงุญุจ ุงูุดุฃู) ุนุจุฑ ุงูุจุฑูุฏ ููู ุญุงูุฉ ุถูุงุนู ุงุชุญูู ุงููุณุฆูููุฉ ูุงููุฉุ ุฏูู ุฃุฏูู ูุณุฆูููุฉ ุนูู ุงูููุตููุฉ ุงูุนุงูุฉ.
ูุชูุถููุง ุจูุจูู ูุงูุฑ ุงูุงุญุชุฑุงูุุ
ุงูุงุณู /
ุงูุชุงุฑูุฎ /
ุงูุชูููุน /
ุนูู ุฃู ูุชู ุฅุญุถุงุฑ ุฃุตู ุฌูุงุฒ ุณูุฑู ุงููุฏูู ุงู ุฅุฑุณุงูู ุจุงูุจุฑูุฏ ููุฅูุบุงุก ูุงุนุงุฏุชู ุจุงูุจุฑูุฏ ุฃู ุชุณูููู ูู ูุน ุฌูุงุฒ ุงูุณูุฑ ุงูุฌุฏูุฏ ุจุนุฏ ุงูุงูุบุงุก.">
    ุฌูุงุฒ ุงูุณูุฑ ูุตู - ุชุนูููุงุช ุงูุญุถูุฑ ุฃู ุงูุจุฑูุฏ
  </option>

  <option value="ูููุฏูู ุนููุง ุจุฃู ุฌูุงุฒ ุงูุณูุฑ ุงููุทููุจ ูู ูุตู ุจุนุฏ ูุณูุชู ุงุจูุงุบูู ููุฑ ูุตููู">
    ุฌูุงุฒ ุงูุณูุฑ ูู ูุตู ุจุนุฏ
  </option>

  <option value="ูู ุญุงู ุงูุฑุบุจุฉ ูู ุงูุญุตูู ุนูู ุงูุงูุงุฏุฉ ุจุงููุบุฉ ุงูุนุฑุจูุฉ ุฃู ุงูุงููุงููุฉ ุจูุถููู ุฐูู ููููู ุทูุจ ุงูุญุถูุฑ ููุจุนุซุฉ ููุชูุฏู ุจุทูุจ ุงุตุฏุงุฑ ุงูุงูุงุฏุฉ ุงูุฑุณููุฉ ูู ููุงุนูุฏ ุงูุนูู  ูู ุงูุณุงุนุฉ 9:30 ุตุจุงุญุงู ุญุชู ุงูุณุงุนุฉ 13:30 ูุณุงุก ุนูู ุฃู ูุชู ุงุณุชูุงู ุงูุงูุงุฏุฉ ุจุนุฏ ุงูุณุงุนุฉ 14:30 ูุณุงุก ุญุชู ุงูุณุงุนุฉ 16:00 ูุณุงุกุ ูู ููุณ ุงูููู. ููุฒู ุงุญุถุงุฑ ุฃุตู ุฌูุงุฒ ุงูุณูุฑ ุงูุฃููุงูู ูุตูุฑุฉ ูููุ ูุฃุตู ุดูุงุฏุฉ ุงููููุงุฏ ุงููููููุฉ ูุตูุฑุฉ ูููุง ูุตูุฑุฉ ูู ุงูุงูุงุฏุฉ ุงูุณุงุจู ุตุฏูุฑูุง ุงููุชุถููุฉ ุฑูู ูุชุงุฑูุฎ ุงููุฑุงุฑ ุงูุฎุงุต ุจุงูุงุฐู ุจุงูุชุฌูุณ ุจุงูุฌูุณูุฉ ุงูุงููุงููุฉ ูุน ุนุฏู ุงูุงุญุชูุงุธ ุจุงูุฌูุณูุฉ ุงููุตุฑูุฉุ ุนููุงู ุจุฃู ุฑุณูู ุฅุตุฏุงุฑ ุงูุงูุงุฏุฉ ุงููุงุญุฏุฉ 63.00 ููุฑู.">
    ุทูุจ ุฅูุงุฏุฉ ุชุฌูุณ ูุน ุนุฏู ุงูุงุญุชูุงุธ ุจุงูุฌูุณูุฉ - ุจุงูุญุถูุฑ
  </option>

  <option value="ูููู ุทูุจ ุฅุฑุณุงู ุงูุฅูุงุฏุฉ ุจุงูุจุฑูุฏ ุนูู ุฃู ูุฑุงุนู ุงุฑูุงู ุทูุจ ููุชูุจ ูุงุตุฏุงุฑ ุชูู ุงูุงูุงุฏุฉ ุงูุฑุณููุฉุ ูุงููุณุชูุฏุงุช: ุฃุตู ุฌูุงุฒ ุงูุณูุฑ ุงูุฃููุงูู ูุตูุฑุฉ ูููุ ูุฃุตู ุดูุงุฏุฉ ุงููููุงุฏ ุงููููููุฉ ูุตูุฑุฉ ูููุง ูุตูุฑุฉ ูู ุงูุงูุงุฏุฉ ุงูุณุงุจู ุตุฏูุฑูุง ุงููุชุถููุฉ ุฑูู ูุชุงุฑูุฎ ุงููุฑุงุฑ ุงูุฎุงุต ุจุงูุงุฐู ุจุงูุชุฌูุณ ุจุงูุฌูุณูุฉ ุงูุงููุงููุฉ ูุน ุนุฏู ุงูุงุญุชูุงุธ ุจุงูุฌูุณูุฉ ุงููุตุฑูุฉุ ููุจูุบ 63.00 ููุฑูุ ููุธุฑูู ุงุนุงุฏุฉ ูุณุชููู ูููุฉ ุทูุงุจุน ุงูุงุนุงุฏุฉุ ููุฏูู ุนููู ุงูุงุณู ูุงูุนููุงู ุชูุตููุงู ูู ุงููุงููุง ุญุชู ูุชุณูู ุงูุงุฑุณุงู.">
    ุทูุจ ุฅูุงุฏุฉ ุชุฌูุณ ูุน ุนุฏู ุงูุงุญุชูุงุธ - ุจุงูุจุฑูุฏ
  </option>

  <option value="ุจุนุฏ ุงูููุงููุฉ ุนูู ุฑุฏ ุงูุฌูุณูุฉุ ูู ุญุงู ุงูุฑุบุจุฉ ูู ุจุฏุก ุงุฌุฑุงุกุงุช ุงุณุชุฎุฑุงุฌ ุจุทุงูุฉ ุงูุฑูู ุงููููู ุฃู ุงุณุชุฎุฑุงุฌ ุฌูุงุฒ ุณูุฑ:
ููุฒู ุฃููุงู  ุงูุจุฏุก ูู ุงุณุชุฎุฑุงุฌ ุจุทุงูุฉ ุงูุฑูู ุงููููู ูุจุนุฏ ุงุตุฏุงุฑูุงุ ูุชู ุงูุจุฏุก ูู ุงุฌุฑุงุกุงุช ุงุณุชุฎุฑุงุฌ ุฌูุงุฒ ุงูุณูุฑ.">
    ุชุนูููุงุช ุจุนุฏ ูุฑูุฏ ุงูููุงููุฉ ุนูู ุงุณุชุฑุฏุงุฏ ุงูุฌูุณูุฉ
  </option>

  <option value="ุชุชุดุฑู ุงูููุตููุฉ ุจุงูุฅูุงุฏุฉ ุจูุฑูุฏ ุฑุฏ ุงูุงุฏุงุฑุฉ ุงูุนุงูุฉ ููุฌูุงุฒุงุช ูุงููุฌุฑุฉ ูุงูุฌูุณูุฉ ุนูู ุงูุฅุฐู ุจุงูุชุฌูุณ ุจุงูุฌูุณูุฉ ุงูุงููุงููุฉ ูุน ุงูุงุญุชูุงุธ ุจุงูุฌูุณูุฉ ุงููุตุฑูุฉุ ูููููู ุงูุญุถูุฑ ุงูู ุงูุจุนุซุฉ ุฎูุงู ุฃูุงู ุงูุนูู ุงูุฑุณููุฉ ุนุฏุง ุฃูุงู ุงูุนุทูุงุช ูุงูุงุฌุงุฒุงุช ุงูุฑุณููุฉ ููุญุตูู ุนูู ุงูุงุฏุฉ ุฑุณููุฉ ุจุงููุบุฉ ุงูุงููุงููุฉ ุชููุฏ ุจุตุฏูุฑ ุงููุฑุงุฑ ุงูุฅุฐู ุจุงูุชุฌูุณ ุจุงูุฌูุณูุฉ ุงูุฃููุงููุฉุ ุนูู ุฃู ูุชู ุงุญุถุงุฑ ุฃุตู ุฌูุงุฒ ุงูุณูุฑ ุงููุตุฑู ูุตูุฑุฉ ููู. ุนููุงู ุจุฃู ุฑุณูู ุงูุงูุงุฏุฉ ุงููุงุญุฏุฉ 63.00 ููุฑู.">
    ุงูุญุถูุฑ ูุชุณูู ุฅูุงุฏุฉ ุงูุชุฌูุณ ูุน ุงูุงุญุชูุงุธ ุจุงูุฌูุณูุฉ
  </option>

  <option value="ูุฑุฏุช ุจุทุงูุฉ ุงูุฑูู ุงููููู ุงูุฎุงุตุฉ ุจูู. ููุงุณุชูุงูุ ูุฑุฌู ุงุชุจุงุน ูุง ููู:
โข ุงูุญุถูุฑ ุดุฎุตูุงู ูุน ุฅุญุถุงุฑ ุฃุตู ุฅูุตุงู ุงูุงุณุชูุงู ุฎูุงู ููุงุนูุฏ ุงูุนูู ุงูุฑุณููุฉ ูู ุฃูุงู ุงูุนูู ุงูุฃุณุจูุนูุฉ ุนุฏุง ุฃูุงู ุงูุนุทูุงุช ูุงูุงุฌุงุฒุงุช ุงูุฑุณููุฉุ ุนููุงู ุจุฃู ุงูุงุฌุงุฒุงุช ุงูุฑุณููุฉ ุชููู ุงูุจุนุซุฉ ุจุงูุฅุนูุงู ุนููุง ุนูู ุตูุญุชูุง ุจูููุน ุงูุชูุงุตู ุงูุงุฌุชูุงุนู ููุณุจูู
https://www.facebook.com/EgyptconsulateFrankfurt
โข ุฃู ุฅุฑุณุงู ุฃุตู ุฅูุตุงู ุงูุงุณุชูุงู ุจุงูุจุฑูุฏ ุงููุณุฌู ูุน ูุธุฑูู ุฅุนุงุฏุฉ (ูุฏูู ุนููู ุนููุงููู โ ูุณุชููู ุงูุทูุงุจุน โ ููุถู ูุฌูุฏ ุฑูู ุชุชุจุนู) ูุฅูุฑุงุฑ ูููุน ูู ุฌุงูุจูู ูููุฏ ุจุนุฏู ุชุญูู ุงูุจุนุซุฉ ุงููุณุฆูููุฉ ุญุงู ุถูุงุน ุงูุจุทุงูุฉ ูู ุงูุจุฑูุฏ.">
    ุชุนูููุงุช ุงุณุชูุงู ุจุทุงูุฉ ุงูุฑูู ุงููููู
  </option>

</select>

        <label>ุชุนุฏูู ููุน ุงููุนุงููุฉ (ุงุฎุชูุงุฑู):</label>
        <select id="edit-transaction-type">
          <option value="">- ุจุฏูู ุชุนุฏูู -</option>
          <option value="ููุฏ ูููุงุฏ">ููุฏ ูููุงุฏ</option>
          <option value="ุจุทุงูุฉ ุงูุฑูู ุงููููู">ุจุทุงูุฉ ุงูุฑูู ุงููููู</option>
          <option value="ุตุญููุฉ ุงูุญุงูุฉ ุงูุฌูุงุฆูุฉ">ุตุญููุฉ ุงูุญุงูุฉ ุงูุฌูุงุฆูุฉ</option>
          <option value="ููุฏ ูุฑุฏู">ููุฏ ูุฑุฏู</option>
          <option value="ููุฏ ุนุงุฆูู">ููุฏ ุนุงุฆูู</option>
          <option value="ููุฏ ุทูุงู">ููุฏ ุทูุงู</option>
          <option value="ููุฏ ุฒูุงุฌ">ููุฏ ุฒูุงุฌ</option>
          <option value="ุดูุงุฏุฉ ููุงุฉ">ุดูุงุฏุฉ ููุงุฉ</option>
          <option value="ุฅูุงุฏุฉ">ุฅูุงุฏุฉ</option>
          <option value="ุฅุตุฏุงุฑ ุฌูุงุฒ ุณูุฑ ูุฃูู ูุฑุฉ">ุฅุตุฏุงุฑ ุฌูุงุฒ ุณูุฑ ูุฃูู ูุฑุฉ</option>
          <option value="ุชุฌุฏูุฏ ุฌูุงุฒ ุณูุฑ">ุชุฌุฏูุฏ ุฌูุงุฒ ุณูุฑ</option>
          <option value="ุจุญุซ ุงูุฌูุณูุฉ">ุจุญุซ ุงูุฌูุณูุฉ</option>
          <option value="ุฅุณุชุฑุฏุงุฏ ุงูุฌูุณูุฉ">ุฅุณุชุฑุฏุงุฏ ุงูุฌูุณูุฉ</option>
          <option value="ุงูุฅุฐู ุจุงูุชุฌูุณ ูุน ุงูุงุญุชูุงุธ ุจุงูุฌูุณูุฉ ุงููุตุฑูุฉ">ุงูุฅุฐู ุจุงูุชุฌูุณ ูุน ุงูุงุญุชูุงุธ ุจุงูุฌูุณูุฉ ุงููุตุฑูุฉ</option>
          <option value="ุงูุฅุฐู ุจุงูุชุฌูุณ ูุน ุนุฏู ุงูุงุญุชูุงุธ ุจุงูุฌูุณูุฉ ุงููุตุฑูุฉ">ุงูุฅุฐู ุจุงูุชุฌูุณ ูุน ุนุฏู ุงูุงุญุชูุงุธ ุจุงูุฌูุณูุฉ ุงููุตุฑูุฉ</option>
        </select>

        <button id="update-btn">ุชุญุฏูุซ ุงูุญุงูุฉ</button>
        <div class="result" id="update-result"></div>
      </div>
    </div>
  </div>

  <div id="toast" style="position: fixed; top: 100px; right: 20px; background: #333; color: white; padding: 10px 20px; border-radius: 8px; display: none; font-size: 18px; z-index: 9999;"></div>

<script>
const SUPABASE_URL = 'https://esbgozuigjdavcxiaxon.supabase.co';
const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVzYmdvenVpZ2pkYXZjeGlheG9uIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQyMjU4NzUsImV4cCI6MjA1OTgwMTg3NX0.OiOH_0ZcTUPu6oMGILsq5oqm1FdCDBvzcHozs-4DNY0';
const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

document.getElementById('login-btn').onclick = async () => {
  const email = document.getElementById('email').value;
  const password = document.getElementById('password').value;

  const { data, error } = await supabase.auth.signInWithPassword({ email, password });
console.log("Login data:", data);
console.log("Login error:", error);


  if (error) {
    return showToast('ุฎุทุฃ ุฃุซูุงุก ุชุณุฌูู ุงูุฏุฎูู: ' + error.message, false);
  }

  showToast('โ ุชู ุชุณุฌูู ุงูุฏุฎูู ุจูุฌุงุญ.');
  document.getElementById('auth-section').style.display = 'none';
  document.getElementById('app-section').style.display = 'block';
};


document.getElementById('logout-btn').onclick = async () => {
  await supabase.auth.signOut();
  location.reload();
};

function showToast(message, success = true) {
  const toast = document.getElementById('toast');
  toast.style.background = success ? '#28a745' : '#dc3545';
  toast.innerText = message;
  toast.style.display = 'block';
  setTimeout(() => { toast.style.display = 'none'; }, 7000);
}

async function generateUniqueNumber() {
  const { data } = await supabase.from('civil_status').select('number');
  const existing = new Set(data.map(row => row.number));
  let number;
  do {
    number = String(Math.floor(10000 + Math.random() * 90000));
  } while (existing.has(number));
  return number;
}

document.getElementById('submit-btn').onclick = async () => {
  const name = document.getElementById('name').value.trim();
  const transaction = document.getElementById('transaction-type').value;
  if (!name || !transaction) return showToast('ูุฑุฌู ุฅุฏุฎุงู ุงูุงุณู ูููุน ุงููุนุงููุฉ.', false);
  const number = await generateUniqueNumber();
  const { error } = await supabase.from('civil_status').insert({ number, status: 'ุฌุงุฑู ูุฑุงุฌุนุฉ ุงูุทูุจ', notes: '', transaction });
  if (error) return showToast('ุฎุทุฃ ุฃุซูุงุก ุชุณุฌูู ุงูุทูุจ: ' + error.message, false);
  document.getElementById('result').innerText = `โ ุชู ุชุณุฌูู ุงูุทูุจ ุจูุฌุงุญ. ุฑูู ุงูุทูุจ: ${number}`;
// Set printable HTML content
document.getElementById('print-name').innerText = `ุงุณู ููุฏู ุงูุทูุจ: ${name}`;
document.getElementById('print-number').innerText = `ุฑูู ุงูุทูุจ: ${number}`;
document.getElementById('print-transaction').innerText = `ููุน ุงููุนุงููุฉ: ${transaction}`;

// Convert to image and save as PDF
const printArea = document.getElementById('print-area');
html2canvas(printArea).then(canvas => {
  const imgData = canvas.toDataURL('image/png');
  const { jsPDF } = window.jspdf;
  const pdf = new jsPDF();
  pdf.addImage(imgData, 'PNG', 10, 10, 180, 0);
  const filename = `${name} - ${number} - ${transaction}`.replace(/\s+/g, '_') + '.pdf';
  pdf.output('blob').then(function(blob) {
  const userEmail = document.getElementById('user-email').value.trim();
  const formData = new FormData();
  formData.append('file', blob, filename);

pdf.output('blob').then(blob => {
  const filename = `${name} - ${number} - ${transaction}`.replace(/\s+/g, '_') + '.pdf';
  const userEmail = document.getElementById('user-email').value.trim();
  const formData = new FormData();
  formData.append('pdf', blob, filename);
  formData.append('email', userEmail);
  formData.append('name', name);
  formData.append('transaction', transaction);

  fetch('http://localhost:3000/send-pdf', {
    method: 'POST',
    body: formData
  }).then(res => {
    if (res.ok) {
      showToast("๐ง ุชู ุฅุฑุณุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุจูุฌุงุญ");
      pdf.save(filename);
    } else {
      showToast("โ ูุดู ูู ุฅุฑุณุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู", false);
    }
  }).catch(err => {
    console.error("Fetch error:", err);
    showToast("โ ุชุนุฐุฑ ุฅุฑุณุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู.", false);
  });
});


});
  document.getElementById('name').value = '';
  document.getElementById('phone').value = '';
  document.getElementById('user-email').value = '';
  document.getElementById('transaction-type').value = '';
};

document.getElementById('extract-codes-btn').onclick = () => {
  const files = document.getElementById('pdf-upload').files;
  if (!files.length) return alert('ุงุฎุชุฑ ูููุงุช PDF ุฃููุงู.');
  const codes = [];
  for (const file of files) {
    const name = file.name.split('.')[0];
    const match = name.match(/\d+/);
    if (match) codes.push(match[0]);
  }
  document.getElementById('existing-number').value = codes.join(', ');
};

document.getElementById('update-btn').onclick = async () => {
  const numbersInput = document.getElementById('existing-number').value;
  const status = document.getElementById('status-select').value;
  const notes = document.getElementById('notes').value.trim();
  const transaction = document.getElementById('edit-transaction-type').value;
  if (!numbersInput) return showToast('ูุฑุฌู ุฅุฏุฎุงู ุฑูู ุฃู ุฃุฑูุงู ุงูุทูุจ.', false);
  const numbers = numbersInput.split(',').map(num => num.trim());
  const { data } = await supabase.from('civil_status').select('number');
  const existingNumbers = new Set(data.map(r => r.number));
  let errors = [], successNumbers = [];
  for (let num of numbers) {
    if (!existingNumbers.has(num)) {
      errors.push(num);
    } else {
      let updateData = { status, notes };
      if (transaction) updateData.transaction = transaction;
      await supabase.from('civil_status').update(updateData).eq('number', num);
      successNumbers.push(num);
    }
  }
  if (successNumbers.length > 0 && errors.length > 0) {
    showToast(`โ ุชู ุชุญุฏูุซ ุงูุฃุฑูุงู: ${successNumbers.join(', ')}\nโ ุงูุฃุฑูุงู ุบูุฑ ุงูููุฌูุฏุฉ: ${errors.join(', ')}`, false);
  } else if (successNumbers.length > 0) {
    showToast(`โ ุชู ุงูุชุญุฏูุซ ุจูุฌุงุญ ููุฃุฑูุงู: ${successNumbers.join(', ')}`);
  } else if (errors.length > 0) {
    showToast(`โ ุงูุฃุฑูุงู ุบูุฑ ุงูููุฌูุฏุฉ: ${errors.join(', ')}`, false);
  }
  document.getElementById('existing-number').value = '';
  document.getElementById('status-select').value = '';
  document.getElementById('notes').value = '';
  document.getElementById('edit-transaction-type').value = '';
};
</script>

</body>
</html>